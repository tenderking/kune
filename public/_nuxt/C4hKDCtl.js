import{b as $,_ as B,a as N}from"./vY2qZhG9.js";import{_ as S}from"./djTW2Owj.js";import{_ as T}from"./CJL6ADSF.js";import{_ as W}from"./B6A1WMvg.js";import{e as D,C as k,I,o as c,c as V,a as p,b as o,w as r,D as a,F as L,z as q,d as P,_ as R}from"./gt121ii6.js";import{u as b}from"./BcrmYub2.js";import"./F6I_F62J.js";import"./DKlPxsyM.js";const Y={class:"py-4 grid grid-cols-3 gap-16"},j={class:"col-span-3 p-4 rounded-md flex flex-col gap-4 min-w-[300px]"},z=D({__name:"index",async setup(A){var f,v,y;let t,l;const{data:d}=([t,l]=k(()=>b("/api/auth/user","$161L0imkVP")),t=await t,l(),t),F=[{key:"service",label:"Service"},{key:"actions"}],i=I({name:((f=d.value)==null?void 0:f.name)||"",email:((v=d.value)==null?void 0:v.email)||""}),{data:m,error:u}=([t,l]=k(()=>b("/api/users/favorites","$SwSRFLdolR")),t=await t,l(),t);async function U(n){try{const e=await $fetch("/api/users/favorites",{method:"DELETE",body:{service:n},headers:{"Content-Type":"application/json"}});console.log("deleting",e)}catch(e){console.error("Error:",e)}}const _=((y=m==null?void 0:m.value)==null?void 0:y.map(n=>({service:n.name,actions:n.id})))||[];return u.value&&console.error("Error fetching favorite services:",u.value),(n,e)=>{const g=B,x=N,w=S,h=T,C=$,E=W;return c(),V("div",Y,[e[4]||(e[4]=p("h3",null,"Profile",-1)),o(C,{state:{},class:"card p-4 col-span-3 row-gap-4 rounded-md"},{default:r(()=>[o(x,{label:"Your Name",description:"We'll only use this for spam.",help:"We will never share your email with anyone else.",required:"",class:"grid grid-cols-2 gap-2 items-center"},{default:r(()=>[o(g,{modelValue:a(i).name,"onUpdate:modelValue":e[0]||(e[0]=s=>a(i).name=s),type:"text",name:"name"},null,8,["modelValue"])]),_:1}),o(w,{class:"py-4"}),o(x,{label:"Your Email",description:"We'll only use this for spam.",help:"We will never share your email with anyone else.",required:"",class:"grid grid-cols-2 gap-2 items-centern"},{default:r(()=>[o(g,{modelValue:a(i).email,"onUpdate:modelValue":e[1]||(e[1]=s=>a(i).email=s),type:"email",name:"email"},null,8,["modelValue"])]),_:1}),o(w),o(h,{type:"submit",color:"orange",class:"mt-10"},{default:r(()=>e[2]||(e[2]=[P(" Save ")])),_:1})]),_:1}),p("div",j,[e[3]||(e[3]=p("h3",null,"Favorites",-1)),a(_)?(c(),q(E,{key:1,columns:F,rows:a(_),ui:{tbody:"divide-green-500"},class:"card rounded-md min-w-max"},{"actions-data":r(({row:s})=>[o(h,{color:"gray",variant:"ghost",icon:"i-heroicons-trash-20-solid",onClick:G=>U(s.actions)},null,8,["onClick"])]),_:1},8,["rows"])):(c(),V(L,{key:0},[],64))])])}}}),ee=R(z,[["__scopeId","data-v-c97ac159"]]);export{ee as default};
